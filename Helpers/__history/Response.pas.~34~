unit Response;

interface
uses
  System.JSON,
  System.JSON.Builders,
  System.JSON.Writers,
  System.JSON.Readers,
  System.JSON.BSON,
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes;

type
  TResponse = class(TObject)
public
  
  function setResponse(): TObject;
  function getResponse(): TObject;
  end;


implementation

constructor Response.Create();
begin
    setResponse();
end;

  function setResponse(resultado) : TObject;
  var
       JSonObject : TJSonObject;
  begin
         try
          Result :=JSonObject.ParseJSONValue(resultado);
        except
          Result :=UTF8ToWideString(resultado);
        end;
  end;

  function setMessage() : TJSonObject;
  begin
    setResponse(resultado);
    JsonData:=(JsonValue as TJSONObject).Get('data').JSONValue;
    sToken:= getStringValue(((JsonData as TJSONObject).Get('token').JSONValue).ToString);
  end;

  function setResponse(): TObject;
  begin
    setResponse();
    setMessage();

  end;

end.
